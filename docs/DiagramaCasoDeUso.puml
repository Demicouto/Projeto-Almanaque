@startuml AlmanaqueUseCaseDiagram
title Diagrama de Caso de Uso - Sistema Almanaque

' Configura o layout para a direção da esquerda para a direita, típica para Use Case
left to right direction

' ===================================================================
' Atores
' ===================================================================
actor Leitor as Leitor <<TipoUsuario.LEITOR>>
actor Admin as Admin <<TipoUsuario.ADMIN>>

' Relação de Generalização: Um Admin é também um Leitor
Admin --|> Leitor

' ===================================================================
' Limite do Sistema
' ===================================================================
rectangle "Sistema Almanaque (Gestão de Biblioteca)" {

  ' =================================================================
  ' Casos de Uso
  ' =================================================================

  package "Gestão de Acesso" {
    (Acessar Sistema / Login) as UC_LOGIN
    (Cadastrar Usuário) as UC_CAD_USER
  }

  package "Catálogo de Livros" {
    (Pesquisar Livro) as UC_PESQ_LIVRO
    (Listar Todos os Livros) as UC_LIST_LIVRO
    (Cadastrar Novo Livro) as UC_CAD_LIVRO
    (Gerenciar Categorias) as UC_GER_CAT
  }

  package "Gestão de Empréstimos" {
    ' Implementação no EmprestimoController
    (Realizar Empréstimo) as UC_EMPRESTAR
    (Realizar Devolução) as UC_DEVOLVER
    (Calcular Multa) as UC_MULTA
  }


  ' =================================================================
  ' Relações dos Casos de Uso
  ' =================================================================

  ' Relacionamento de Inclusão: Devolução *sempre* inclui a verificação da multa
  UC_DEVOLVER ..> UC_MULTA : <<include>>

  ' Relacionamento de Inclusão: O cadastro de livro pode incluir o gerenciamento de categoria
  UC_CAD_LIVRO ..> UC_GER_CAT : <<include>>

}

' ===================================================================
' Relações dos Atores
' ===================================================================

' Acesso
Leitor -- UC_LOGIN
Leitor -- UC_CAD_USER

' Catálogo (Funcionalidades de Leitor herdadas pelo Admin)
Leitor -- UC_PESQ_LIVRO
Leitor -- UC_LIST_LIVRO

' Funções de Admin
Admin -- UC_CAD_LIVRO
Admin -- UC_EMPRESTAR
Admin -- UC_DEVOLVER

@enduml